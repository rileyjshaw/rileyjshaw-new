<!DOCTYPE html><html class="blog-post-page" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.71994f3f90f27a005603.css" id="gatsby-global-css">:root{--cfg-emphasis:#000;--cfg-emphasis-rgb:0,0,0;--cui:var(--cy);--cui-emphasis:#dbbe00;--cui-error:var(--cr);--fader-height:200px;--fader-width:6px}.scaling-fader-container,.scaling-faderbank,.scaling-faderbanks,.scaling-faders,.scaling-faders-demo{align-items:center;display:flex;flex-shrink:1;justify-content:center;min-width:0}.scaling-faders-demo{color:var(--cfg);flex-direction:column;font:500 24px var(--fss);height:400px;margin-bottom:var(--font-scale-4);max-width:100%}.scaling-faderbanks{margin:0 calc(var(--fader-width)*2) var(--font-scale-2)}.scaling-faderbank{flex-direction:column;margin:0 calc(var(--fader-width)*2)}.scaling-faders{padding:24px 0;position:relative;width:100%}.scaling-faders:after,.scaling-faders:before{border:solid var(--cfg);content:"";height:12px;position:absolute}.scaling-faders:before{border-width:0 3px 3px;bottom:0;width:100%}.scaling-faders:after{border-width:0 0 0 3px;bottom:-12px}.scaling-fader-container{flex:1 1;height:var(--fader-height);width:48px}.scaling-fader{-webkit-appearance:none;background-color:var(--cfg);border:0;border-radius:calc(var(--fader-width)/2);cursor:pointer;flex-shrink:0;height:var(--fader-width);margin:0;outline:0;padding:0;transform:rotate(-90deg);width:var(--fader-height)}.scaling-fader::-webkit-slider-runnable-track{background:var(--cfg);border:0;border-radius:calc(var(--fader-width)/2);cursor:pointer;height:var(--fader-width);width:var(--fader-height)}.scaling-fader::-moz-range-track{background:var(--cfg);border:0;border-radius:calc(var(--fader-width)/2);cursor:pointer;height:var(--fader-width);width:var(--fader-height)}.scaling-fader::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;background:var(--cui);border:var(--fader-width) solid var(--cfg);border-radius:50%;box-sizing:content-box;cursor:pointer;height:calc(var(--fader-width)*3);margin-top:calc(var(--fader-width)*-2);width:calc(var(--fader-width)*3)}.scaling-fader-locked .scaling-fader::-webkit-slider-thumb{background:var(--cui-error)!important}.scaling-fader::-moz-range-thumb{-webkit-appearance:none;appearance:none;background:var(--cui);border:var(--fader-width) solid var(--cfg);border-radius:50%;cursor:pointer;height:calc(var(--fader-width)*3);width:calc(var(--fader-width)*3)}.scaling-fader-locked .scaling-fader::-moz-range-thumb{background:var(--cui-error)!important}.scaling-fader::-ms-thumb{-webkit-appearance:none;appearance:none;background:var(--cui);border:var(--fader-width) solid var(--cfg);border-radius:50%;cursor:pointer;height:calc(var(--fader-width)*3);margin-top:0;width:calc(var(--fader-width)*3)}.scaling-fader-locked .scaling-fader::-ms-thumb{background:var(--cui-error)!important}.scaling-fader::-ms-track{background:transparent;border-color:transparent;border-width:9px 0;color:transparent;cursor:pointer;height:var(--fader-width);width:var(--fader-height)}.scaling-fader::-ms-fill-lower,.scaling-fader::-ms-fill-upper{background:var(--cfg);border:0;border-radius:calc(var(--fader-width)/2)}.scaling-fader:active::-webkit-slider-thumb{background:var(--cui-emphasis)}.scaling-fader:active::-moz-range-thumb{background:var(--cui-emphasis)}.scaling-fader:active::-ms-thumb{background:var(--cui-emphasis)}.scaling-fader:focus,.scaling-fader:hover{background:var(--cfg-emphasis);outline:none}.scaling-fader:focus ::-webkit-slider-runnable-track,.scaling-fader:hover ::-webkit-slider-runnable-track{background:var(--cfg-emphasis)}.scaling-fader:focus::-ms-fill-lower,.scaling-fader:hover::-ms-fill-lower{background:var(--cfg)}.scaling-fader:focus::-ms-fill-upper,.scaling-fader:hover::-ms-fill-upper{background:var(--cfg-emphasis)}.scaling-fader:focus{box-shadow:0 0 2px rgba(var(--cfg-emphasis-rgb),.5)}@supports (-ms-ime-align:auto){.scaling-fader{margin:0}}.scaling-fader-label{font:inherit;margin:18px 0 0;padding:0}.scaling-fader-button{background:var(--cui);border:6px solid var(--cfg);border-radius:8px;cursor:pointer;font:inherit;margin:auto;padding:1em 1em .9em}.scaling-fader-button:active{background:var(--cui-emphasis)}.scaling-faders-loading{margin:auto}.scaling-fader-mode-toggle{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.scaling-fader-mode-toggle+label:before{background:var(--cbg);border:6px solid var(--cfg);border-radius:50%;box-sizing:content-box;content:"";display:inline-block;height:calc(var(--fader-width)*3);margin-right:.5em;vertical-align:text-bottom;width:calc(var(--fader-width)*3)}.scaling-fader-mode-toggle:checked+label:before{background:var(--cui)}.scaling-fader-mode-toggle:active+label:before{background:var(--cui-emphasis)}@media only screen and (max-width:600px){:root{--fader-height:160px;--fader-width:4px}.scaling-faders-demo{font-size:18px}}.blog-banner{border-radius:6px;color:var(--cbg);display:flex;font-size:var(--font-scale--2);margin:2em 0 1em;padding:1em 2em;width:100%}.blog-banner+.blog-banner{margin-top:1.5em}.blog-banner+p{margin-top:2em}.blog-banner a{color:var(--cbg)}.blog-banner-note a{color:var(--cfg)}.blog-banner-update{background:var(--cb)}.blog-banner-edit{background:var(--cr)}.blog-banner-note{background:var(--cy);color:var(--cfg)}.blog-banner-title{align-items:center;border-right:1px solid var(--cbg);display:flex;font-weight:500;margin-right:1.5em;padding-right:1.5em}.blog-banner-note .blog-banner-title{border-color:var(--cfg)}.blog-banner-content{font-family:var(--fs)}.blog-banner-content p{margin:0}.blog-banner-content p+p{margin-top:1em}.blog-banner-group .blog-banner-title{min-width:20%}@media only screen and (max-width:800px){.blog-banner{flex-direction:column;padding:1em 1.5em}.blog-banner-title{border:0;margin-bottom:1em;text-decoration:underline}}@font-face{font-family:Geomanist;font-style:normal;font-weight:400;src:url(/static/geomanist-regular-webfont-15172c4485d205a9b749ddff016d8dd3.eot);src:url(/static/geomanist-regular-webfont-15172c4485d205a9b749ddff016d8dd3.eot?#iefix) format("embedded-opentype"),url(/static/geomanist-regular-webfont-a35649b1d4c9738de84be469ebdf3b2e.woff2) format("woff2"),url(/static/geomanist-regular-webfont-deb2e275f84cb3a34faaccd5f0daa4f7.woff) format("woff"),url(/static/geomanist-regular-webfont-7da201004f3c567bae2df158acb0b639.ttf) format("truetype"),url(/static/geomanist-regular-webfont.0f2de97b.svg#geomanistregular) format("svg")}@font-face{font-family:Geomanist;font-style:italic;font-weight:400;src:url(/static/geomanist-regular-italic-webfont-ac06e16aedba7a941f97519709e1a617.eot);src:url(/static/geomanist-regular-italic-webfont-ac06e16aedba7a941f97519709e1a617.eot?#iefix) format("embedded-opentype"),url(/static/geomanist-regular-italic-webfont-ba127af9a9563d9b9c1873e77178ef82.woff2) format("woff2"),url(/static/geomanist-regular-italic-webfont-fb5b95e1b32879457d21e9ea00163cc9.woff) format("woff"),url(/static/geomanist-regular-italic-webfont-c2f7cd9d4cd7e1c808d06c153c40a639.ttf) format("truetype"),url(/static/geomanist-regular-italic-webfont.77fbbddd.svg#geomanistitalic) format("svg")}@font-face{font-family:Geomanist;font-style:normal;font-weight:500;src:url(/static/geomanist-medium-webfont-1ee2f8979b740615e39add6d409e5502.eot);src:url(/static/geomanist-medium-webfont-1ee2f8979b740615e39add6d409e5502.eot?#iefix) format("embedded-opentype"),url(/static/geomanist-medium-webfont-55687bb88819a897b599bb150b1fddcf.woff2) format("woff2"),url(/static/geomanist-medium-webfont-e2952532658d8ee6eeb1c4476d090d44.woff) format("woff"),url(/static/geomanist-medium-webfont-710cedaf67c4c630429aa1b827f56fea.ttf) format("truetype"),url(/static/geomanist-medium-webfont.9a1ff231.svg#geomanistregular) format("svg")}@font-face{font-family:Geomanist;font-style:italic;font-weight:500;src:url(/static/geomanist-medium-italic-webfont-fe515dad58c3e3fbad0e4567b54aebcd.eot);src:url(/static/geomanist-medium-italic-webfont-fe515dad58c3e3fbad0e4567b54aebcd.eot?#iefix) format("embedded-opentype"),url(/static/geomanist-medium-italic-webfont-a55f8f620cbd5804be1114299c1e9fd1.woff2) format("woff2"),url(/static/geomanist-medium-italic-webfont-5082bba11725061201334a3e8578c94e.woff) format("woff"),url(/static/geomanist-medium-italic-webfont-243b9f201597969bfe1283f6b067ae70.ttf) format("truetype"),url(/static/geomanist-medium-italic-webfont.d2f611f8.svg#geomanistitalic) format("svg")}@font-face{font-family:Geomanist;font-style:normal;font-weight:900;src:url(/static/geomanist-black-webfont-f4eb37cbfe3672db181cc3cb2cdac038.eot);src:url(/static/geomanist-black-webfont-f4eb37cbfe3672db181cc3cb2cdac038.eot?#iefix) format("embedded-opentype"),url(/static/geomanist-black-webfont-1580bb7dd525ee6b80d48c32b50dae88.woff2) format("woff2"),url(/static/geomanist-black-webfont-3c3508598ad8073636a1de5ddbd2362e.woff) format("woff"),url(/static/geomanist-black-webfont-ef8e5c06089f53886f3f4bb2940b027d.ttf) format("truetype"),url(/static/geomanist-black-webfont.30e097ea.svg#geomanistregular) format("svg")}@font-face{font-family:Geomanist;font-style:italic;font-weight:900;src:url(/static/geomanist-black-italic-webfont-12f2a6f5815fe08cb001fd5eed173400.eot);src:url(/static/geomanist-black-italic-webfont-12f2a6f5815fe08cb001fd5eed173400.eot?#iefix) format("embedded-opentype"),url(/static/geomanist-black-italic-webfont-5458f80e79e88f852b2ff5cb45b91f76.woff2) format("woff2"),url(/static/geomanist-black-italic-webfont-667d01fd2070a3b6f102ac3c5151bdd8.woff) format("woff"),url(/static/geomanist-black-italic-webfont-d216be8f78412df21082691e3c3a4122.ttf) format("truetype"),url(/static/geomanist-black-italic-webfont.6d3e9d07.svg#geomanistitalic) format("svg")}:root{--font-scale--5:0.328em;--font-scale--4:0.41em;--font-scale--3:0.512em;--font-scale--2:0.64em;--font-scale--1:0.8em;--font-scale-0:1em;--font-scale-1:1.25em;--font-scale-2:1.563em;--font-scale-3:1.953em;--font-scale-4:2.441em;--font-scale-5:3.052em;--font-scale-6:3.815em}pre{font-size:var(--font-scale--1)}.anchor.before{left:0;padding-right:4px;position:absolute;top:0;transform:translateX(-100%)}.anchor.after{display:inline-block;padding-left:4px}h1 .anchor svg,h2 .anchor svg,h3 .anchor svg,h4 .anchor svg,h5 .anchor svg,h6 .anchor svg{visibility:hidden}h1 .anchor:focus svg,h1:hover .anchor svg,h2 .anchor:focus svg,h2:hover .anchor svg,h3 .anchor:focus svg,h3:hover .anchor svg,h4 .anchor:focus svg,h4:hover .anchor svg,h5 .anchor:focus svg,h5:hover .anchor svg,h6 .anchor:focus svg,h6:hover .anchor svg{visibility:visible}:root{--co:#eee;--cr:#ff4136;--cg:#2ecc40;--cb:#0074d9;--cc:#00bcd4;--cm:#e91e63;--cy:#ffdc00;--ck:#0a0b08;--cbg:#faf9f7;--cbgrgb:255,255,255;--cfg:var(--ck);--fss:"Geomanist",arial,"Helvetica Neue",helvetica,sans-serif;--fs:georgia,palatino,"Palatino Linotype",times,"Times New Roman",serif;--fh:"Geomanist","Proxima Nova","Montserrat","Arial Black","Arial Bold",gadget,sans-serif;--fm:"Courier New",courier,"Lucida Sans Typewriter","Lucida Typewriter",monospace;--s7:2.80492446em;--s6:2.243939568em;--s5:1.7951516544em;--s4:1.4361213235em;--s3:1.1488970588em;--s2:0.9191176471em;--s1:0.7352941176em;--s0:0.5882352941em;--s-1:0.4705882353em;--s-2:0.3764705882em}*,:after,:before{box-sizing:border-box}::selection{background:var(--cy)}body,html{overflow:auto}blockquote,body,dd,dl,figure,h1,h2,h3,h4,li,p{margin:0}ol[class],ul[class]{list-style:none;margin:0;padding:0}button,code,input,pre,select,textarea{font:inherit;letter-spacing:inherit;word-spacing:inherit}button{cursor:pointer}html{background:var(--cbg);color:var(--cfg);font:18px/1.7 var(--fss)}body{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;min-height:100vh;text-rendering:optimizeLegibility}h1,h2,h3,h4{font-family:var(--fh);font-weight:500}h1{font-size:var(--font-scale-4);margin:var(--font-scale--1) 0 var(--font-scale--4)}h2{font-size:var(--font-scale-3);margin:var(--font-scale-0) 0 0}h3,h4{font-size:var(--font-scale-1);margin:var(--font-scale-2) 0 var(--font-scale--1)}dd,p{margin-bottom:var(--font-scale-1);margin-top:1em}dd,dt,li,p{font-family:var(--fs)}code,pre{font-family:var(--fm);overflow:auto}a{color:var(--cb)}a[target=_blank]{cursor:alias}a[target=_blank]:after{content:"\202F\279A";font-family:var(--fs)}code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:none;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#8292a2}.token.punctuation{color:#f8f8f2}.token.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.big-quote{align-items:center;display:flex;flex-direction:column;font-family:var(--fs);font-size:var(--font-scale-2);justify-content:space-between;margin:0;min-height:100vh;position:relative}.big-quote:before{content:"";margin-top:120px}.big-quote.no-refresh:after{content:"";margin-bottom:120px}.big-quote .refresh,.big-quote:after,.big-quote:before{height:60px;width:60px}.big-quote blockquote{margin:0 auto;max-width:800px;padding-bottom:2em;width:90%}.big-quote p{margin:0 0 15px;text-align:justify}.big-quote footer{margin-top:30px;text-align:right}.big-quote .refresh{background:none;border:0;fill:var(--cfg);margin-bottom:120px}@media only screen and (max-width:800px){.big-quote{font-size:var(--font-scale-0)}}.palette-test-tool ul{list-style:none;margin:0;padding:0}.palette-test-tool .title{border-bottom:1px solid var(--cfg);margin:1rem 18px 0;padding:0}.palette-test-tool .subtitle{color:var(--cfg);display:block;font-weight:500;margin:6px 18px 2rem;text-decoration:none}.list-name{align-items:center;background:var(--cbg);bottom:18px;display:inline-flex;height:2rem;margin:0 18px;padding:0 .2rem;position:-webkit-sticky;position:sticky;top:0;transform:translateY(1rem);z-index:1}.color-list{height:100vh;width:100vw}.color-item,.color-list{display:flex;position:relative}.color-item{align-items:center;flex-grow:1;justify-content:center}.color-item input{background:none;border:0;display:inline-block;font-size:42px;font-weight:500;max-width:12vw;text-align:center}.color-item svg{bottom:0;left:0;position:absolute;right:0;top:0}.multiply-test svg{mix-blend-mode:multiply}.screen-test svg{mix-blend-mode:screen}.fullscreen{border:12px solid #000;display:flex;font-size:60px;height:100vh;width:100vw}.fullscreen>*{margin:auto}.plus{height:110vh}.go-up{align-items:center;display:flex;font-family:Menlo,var(--fss),sans-serif;font-size:600px;height:100vh;justify-content:center;overflow:hidden;width:100%}.go-up span{cursor:n-resize;transform:translate(-10%) rotate(-90deg)}@media only screen and (max-width:800px){.go-up{font-size:300px}}.idle-blocker,.idle-blocker button{background:var(--cfg);color:var(--cbg);font-family:var(--fs)}.idle-blocker{align-items:center;display:flex;flex-direction:column;height:100vh;justify-content:center;left:0;position:fixed;top:0;width:100vw;z-index:10}.idle-blocker ul{display:flex;justify-content:space-between;list-style:none;padding:0}.idle-blocker button{border:0;font-size:inherit;margin:0 var(--font-scale-1);text-decoration:underline}.site-content{overflow:auto;position:relative}main{animation:fade-in 1s ease}@keyframes fade-in{0%{opacity:0}to{opacity:1}}@keyframes slide-left{0%{transform:translate3d(24px,0,0)}to{transform:none}}@keyframes slide-right{0%{transform:translate3d(-24px,0,0)}to{transform:none}}.newsletter-form,.newsletter-form input{font-family:var(--fs);font-weight:500}.newsletter-form{margin-bottom:var(--font-scale-3)}.newsletter-form label{display:block;font-size:var(--font-scale-1);margin-bottom:var(--font-scale--1)}.newsletter-form input{-webkit-appearance:none;appearance:none;border-radius:0;font-size:var(--font-scale--1);margin:0}.newsletter-form .bottom-row{display:flex;height:60px;margin:var(--font-scale--1) 0}.newsletter-form input[type=text]{border:1px solid var(--cfg);border-right:0;flex-grow:1;padding:4px 12px}.newsletter-form input[type=submit]{background:var(--cfg);border:0;color:var(--cbg);cursor:pointer;font-family:var(--fss)}.site-nav button{display:none}.site-nav ul{display:flex;list-style:none;margin:0 0 0 calc(var(--font-scale-1)*-1);padding:0;position:relative}.site-nav li{text-align:center;width:96px}.site-nav li:nth-last-of-type(2){width:144px}.site-nav a{color:var(--cfg);font-family:var(--fh);font-size:var(--font-scale--1);font-weight:500;text-decoration:none;transition:color .2s .2s}.active a{color:var(--cbg);transition:color .2s .4s}.site-nav .underline{background:var(--cfg);display:none;height:101%;left:0;pointer-events:none;position:absolute;top:0;transition:transform .6s;transition-timing-function:cubic-bezier(1,.01,0,1.22);width:96px;z-index:-1}.site-nav li:first-child.active~.underline{display:block;transform:translateZ(0) scaleX(.8)}.site-nav li:nth-child(2).active~.underline{display:block;transform:translate3d(100%,0,0) scaleX(.85)}.site-nav li:nth-child(3).active~.underline{display:block;transform:translate3d(200%,0,0) scaleX(.6)}.site-nav li:nth-child(4).active~.underline{display:block;transform:translate3d(300%,0,0) scaleX(.7)}.site-nav li:nth-child(5).active~.underline{display:block;transform:translate3d(425%,0,0)}.site-nav li:first-child a{animation-delay:0s,-.5s}.site-nav li:nth-child(2) a{animation-delay:0s,-.4s}.site-nav li:nth-child(3) a{animation-delay:0s,-.3s}.site-nav li:nth-child(4) a{animation-delay:0s,-.2s}.site-nav li:nth-child(5) a{animation-delay:0s,-.1s}@media only screen and (max-width:960px){.site-nav{display:block;height:0;position:absolute;right:1em;top:1em;z-index:1}.site-nav button{align-items:center;background:var(--cbg);border:none;border-radius:50%;box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24);color:var(--cfg);display:flex;font-size:var(--font-scale-2);height:54px;justify-content:center;margin-left:auto;padding:0;position:relative;transition:box-shadow .3s cubic-bezier(.25,.8,.25,1);width:54px;z-index:1}.site-nav button:hover{box-shadow:0 3px 6px rgba(0,0,0,.16),0 3px 6px rgba(0,0,0,.23)}.site-nav button svg{fill:var(--cfg);height:50%}.site-nav button.open{fill:var(--cbg)}.site-nav ul.hidden{display:none}.site-nav ul{background:var(--cbg);bottom:0;flex-direction:column;left:0;margin:0;overflow:auto;-ms-scroll-chaining:none;overscroll-behavior:contain;position:fixed;right:0;top:0}.site-nav li{border-radius:0 1000px 1000px 0;box-sizing:content-box;display:flex;flex-grow:1;width:100%!important}.site-nav li.underline{display:none!important}.site-nav a{align-items:center;animation:fade-in 1s ease-in-out,slide-right 1s ease-in-out;color:var(--cfg);display:flex;flex-grow:1;font-size:var(--font-scale-2);font-weight:400;justify-content:center;text-decoration:none;width:100%}}.page-header{align-items:flex-end;border-bottom:4px solid var(--cfg);display:flex;justify-content:space-between;margin:1em 1em 0}.title{color:var(--cfg);font-family:var(--fh);font-size:var(--font-scale-4);font-weight:500;line-height:1.1;margin:0;padding-bottom:12px;position:relative}.page-header a{text-decoration:none}.title .b,.title .g,.title .r{mix-blend-mode:multiply;width:-webkit-max-content;width:max-content;will-change:left,top}.title .r{color:var(--cr);position:relative}.title .r>:last-child{margin-bottom:-.1em}.title .b,.title .g{pointer-events:none;position:absolute;-webkit-user-select:none;-ms-user-select:none;user-select:none}.title .g{color:var(--cg)}.title .b{color:var(--cb)}.title span{display:block}.page-not-found,.page-not-found #___gatsby,.page-not-found #gatsby-focus-wrapper,.page-not-found body{height:100%}.page-not-found #gatsby-focus-wrapper{background:var(--cc);display:flex;flex-direction:column}.page-not-found header{justify-self:flex-start}.page-not-found main{background:var(--cbg);border:1px solid var(--cfg);box-shadow:4px 4px var(--cfg);margin:60px auto 0;max-width:90%;padding:var(--font-scale-1) var(--font-scale-2);width:36em}@media only screen and (max-width:480px){.page-not-found #gatsby-focus-wrapper{background:var(--cbg)}.page-not-found main{border:0;box-shadow:none;margin:0;max-width:100%}}.subscribe-page .inner{font-size:var(--font-scale-1);margin:auto;max-width:90%;padding:60px 0;width:36em}.subscribe-page hr{margin:var(--font-scale-4) 0}.top-nav{margin-top:var(--font-scale-2)}.top-nav h1{display:inline;font:inherit;font-weight:900}.blog-post-page .site-content{font-size:var(--font-scale-1);margin:auto;max-width:90%;width:36em}.blog-post-page .blog-post-content{padding-bottom:3em}.blog-post-content header{line-height:1}.blog-post-page .blog-post-content h1{font-family:var(--fh);font-size:var(--font-scale-5);margin-bottom:0}.blog-post-content header .subheading{font-family:var(--fss);font-size:var(--font-scale--2);font-style:italic;font-weight:500;margin-left:.2em;margin-top:1.5em}.blog-post-content header+p{margin-top:3em}.blog-post-content ol,.blog-post-content ul{margin:var(--font-scale-1) 0}.blog-post-content li{margin-bottom:var(--font-scale--2)}.blog-post-content .footnote-ref{color:inherit;font-size:var(--font-scale--1);font-style:normal;font-weight:700;margin-left:.2em}.blog-post-content .footnotes li{margin-bottom:var(--font-scale--1)}.blog-post-content .footnotes p{display:inline}.blog-post-content figure{text-align:center}.blog-post-content .gatsby-resp-image-wrapper{margin:2.5em auto;max-width:100%}.blog-post-content .blog-figure{margin-bottom:2.5em}.blog-post-content .blog-figure .gatsby-resp-image-wrapper{margin-bottom:0}.blog-post-content figcaption{font-size:var(--font-scale--2);font-style:italic}.blog-post-content table{margin:1.5em 24px;text-align:left}.blog-post-content tr:nth-child(2n){background-color:#f8f8f8}.blog-post-content td,.blog-post-content th{border:1px solid #ddd;padding:6px 24px 6px 13px}.blog-post-content cite{display:block;text-align:right}.blog-post-content cite:before{content:"\2013   "}.blog-post-content hr{border:0;border-top:1px solid rgba(0,0,0,.3)}.blog-post-content blockquote{border-left:4px solid var(--cfg);padding-left:1em}.blog-post-content pre{font-size:.75em}@media only screen and (max-width:800px){.blog-post-content pre{font-size:.6em}}.about-page-content{font-size:var(--font-scale-1);margin-top:4em;overflow:hidden}@media only screen and (max-width:960px){.about-page-content{margin-top:2em}}.about-page .about-me{margin:auto;max-width:90%;width:36em}.about-page .currently{color:var(--cfg)}.about-page .timeline{list-style:none;margin:0;padding:0}.about-page .timeline li{margin:0;position:relative}.about-page .timeline li:first-child h3{margin-top:var(--font-scale--1)}.about-page .timeline .logo{height:42px!important;width:42px!important}.about-page .timeline .job-title{font-size:var(--font-scale--2)}.doodle-background-generator{align-items:center;cursor:pointer;display:flex;grid-area:span 2/span 3;height:100%;-ms-interpolation-mode:nearest-neighbor;image-rendering:pixelated;image-rendering:crisp-edges;justify-content:center}.doodle-background-generator span{background:var(--cbg);border:6px solid var(--cfg);font-family:var(--fh);font-size:var(--font-scale--1);font-weight:900;letter-spacing:2px;padding:6px 12px;text-transform:uppercase}.content-node{border:1px solid var(--cfg);color:var(--cfg);max-width:100%;min-width:60px;padding:0 12px 12px;position:relative}.content-node.doodle{padding:0}.content-node .soundcloud{margin-top:12px}.content-node .video-embed{padding-bottom:56.25%;position:relative}.content-node .video-embed iframe{height:100%;left:0;position:absolute;top:0;width:100%}.content-node.unmeasured{visibility:hidden}.content-node .content-type{align-items:center;background:var(--cbg);border:1px solid var(--cfg);color:var(--cfg);display:flex;font-family:var(--fh);font-size:var(--font-scale--1);font-weight:500;height:27px;justify-content:center;left:-1px;padding:0 12px;position:absolute;top:-1px}.content-node h1{font-size:var(--font-scale-2);line-height:1.5;margin-bottom:8px;margin-top:var(--font-scale-1)}.content-node :not(h1)>a{position:relative}.content-node h1 a[target=_blank]:after{align-items:center;background:var(--cbg);border:1px solid var(--cfg);color:var(--cfg);content:"\279A";display:flex;font-size:24px;height:27px;justify-content:center;position:absolute;right:-1px;top:-1px;width:27px}.content-node time:before{content:"0"}.content-node .subheading{display:block;font-family:var(--fss);font-size:var(--font-scale--2);font-style:italic;font-weight:500;margin:0;position:relative;top:-1em}.content-node .subheading a[target=_blank]:after{content:"\279A"}.content-node main{display:flex;flex-basis:0;flex-direction:column;flex-grow:1;overflow:hidden}.content-node.span-2{grid-column-end:span 2}.content-node.span-3{grid-column-end:span 3}.content-node.span-4{grid-column-end:span 4}.content-node.span-5{grid-column-end:span 5}.content-node.span-6{grid-column-end:span 6}.content-node footer{margin-top:auto}.masonry .content-node.measured .inner{display:flex;flex-direction:column;justify-content:flex-start;min-height:100%}.content-node .tags li{border:.5px solid var(--cfg);border-radius:100px;display:inline-block;font-size:var(--font-scale--2);letter-spacing:2px;margin:0 16px 0 0;padding:4px 16px}.content-node.icon main{display:flex}.content-node.icon img{height:42px;margin:auto;width:42px}.excerpt{position:relative}.excerpt:after{background:linear-gradient(rgba(var(--cbgrgb),0),var(--cbg));bottom:0;content:"";display:block;height:90px;left:0;pointer-events:none;position:absolute;right:0}.content-node .continue-reading{font-size:var(--font-scale-1);text-align:right}.blog-list{padding:30px}.blog-list .blog-posts{list-style:none;margin:0;padding:0}.blog-list .blog-post{margin-bottom:30px;padding-bottom:0}.blog-list .blog-post h1{font-size:var(--font-scale-4);margin-top:var(--font-scale--2)}.blog-list .blog-post section{padding:1em 0}.blog-list .blog-post section>:first-child{margin-top:0}.blog-list .page-navigation{align-items:center;display:flex;font-size:var(--font-scale-2);justify-content:space-between;margin:auto;max-width:100%;padding:1.5em 0;width:12em}.blog-list .page-navigation a{font-weight:500;text-decoration:none}.blog-list .page-navigation .current-page{color:var(--cy)}.blog-list .continue-reading{margin-bottom:4px}.doodle-constrained-lines{align-items:center;background:var(--cfg);display:flex;grid-area:span 3/span 3;justify-content:center}.doodle-constrained-lines canvas{background:var(--cfg);max-height:100%;max-width:100%}.content-node.doingreat-grid{background:var(--cfg);color:var(--cbg);font-family:var(--fh);font-weight:900;grid-area:span 2/span 2;justify-items:stretch;text-align:center}.doingreat-item{align-items:center;display:flex;justify-content:center}.doingreat-item:nth-child(2n){background:var(--cbg);color:var(--cfg)}.circles-item,.droplet-item,.snowman,.wavebump-item{align-items:center;display:flex;justify-content:center}.droplet-item,.wavebump-item{font-size:100px}.content-node.wavebump-item{background:var(--cr);color:var(--cy);grid-area:span 3/span 2}.content-node.wavebump-item.tall{background:var(--cg);color:var(--cr);grid-area:span 5/span 2}.content-node.droplet-item{background:var(--cb);color:var(--cc);grid-area:span 5/span 3}.content-node.circles-grid{background:var(--cy);color:var(--cm);font-size:60px;grid-area:span 2/span 3}.content-node.snowman{font-size:30px;grid-area:span 1/span 1}.wavytext{align-items:center;background:var(--cb);color:var(--cy);display:flex;font:900 var(--font-scale--1),var(--fh);grid-area:span 1/span 3;justify-content:space-around;padding-top:20px}.wavytext span{animation:hop 1s ease-in-out infinite alternate;display:inline-block}@keyframes hop{0%{transform:translateZ(0)}to{transform:translate3d(0,-20px,0)}}.content-grid{align-items:stretch;display:grid;gap:30px;grid-auto-flow:row dense;grid-template-columns:repeat(auto-fit,minmax(60px,-webkit-max-content));grid-template-columns:repeat(auto-fit,minmax(60px,max-content));justify-content:space-around;list-style:none;margin:0;width:100%}.project-explorer .content-grid{padding:30px 0}.content-grid.masonry{grid-auto-rows:100px}.frontpage-grid{display:grid;gap:90px 60px;grid-template-columns:1fr 3fr;margin:0 auto;max-width:100%;padding:var(--font-scale-6) 5%}.main-content h2{font-size:var(--font-scale-3);margin:0}.frontpage-doodle{aspect-ratio:1/1;border:5px solid var(--cfg);height:-webkit-max-content;height:max-content;max-width:100%;position:relative}.frontpage-doodle .new-doodle{align-items:center;background:var(--cbg);border:6px solid var(--cfg);border-radius:50%;bottom:-21px;display:flex;height:56px;justify-content:center;position:absolute;right:-21px;width:56px}.frontpage-doodle .new-doodle svg{transform:scale(1.2) translateX(-.5px)}.about-stub{font-family:var(--fs);font-size:var(--font-scale-2)}.about-stub .about-md-wrapper,.about-stub p{display:inline}.about-link{white-space:nowrap}.about-arrow{display:inline-block;font-family:Menlo,var(--fss),sans-serif;width:1ch}.main-projects-title{margin-top:-16px;text-align:right}.frontpage-grid .content-grid .content-node{grid-column-end:-1}h2+.lab-link{color:var(--cfg);font-size:var(--font-scale-1)}.explore-more{font-size:var(--font-scale-2)}@media only screen and (max-width:960px){.frontpage-grid{grid-template-columns:1fr;padding:2.5em 1em 0;row-gap:30px}.frontpage-doodle{display:none}.main-projects-title{margin:.5em 0;text-align:left}}.project-explorer{min-height:100vh;padding:30px}.project-explorer .controls{align-items:flex-start;display:grid;grid-template-columns:[legends] auto [inputs] 1fr [cancel] auto}.project-explorer .filters fieldset{border:0;margin:0;padding:0}.project-explorer .filters fieldset fieldset{align-items:center;display:flex;flex-wrap:wrap;grid-column:1/-1;padding:0}.project-explorer .filters .legend,.project-explorer .result-details{font-family:var(--fh);font-size:var(--font-scale-1);font-weight:500;grid-column:legends;line-height:47px}.project-explorer .filters .legend{font-weight:900;margin:0}.project-explorer .filters .inputs{grid-column:inputs}.project-explorer .filters .labs-clear{grid-column:cancel}.project-explorer .filters input{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.project-explorer-hide-filters,.project-explorer .filters button,.project-explorer .filters label{background:var(--cbg);border:1px solid var(--cfg);box-shadow:2px 2px var(--cfg);cursor:pointer;display:inline-block;font-family:var(--fh);font-size:var(--font-scale--1);font-weight:500;margin:0 0 30px 16px;padding:10px 20px}.project-explorer-hide-filters{margin-left:0;width:100%}.project-explorer .filters :checked+label,.project-explorer button:active{background:var(--grey);box-shadow:none;font-weight:900;-webkit-text-decoration:underline 2px;text-decoration:underline 2px;transform:translate(3px,3px)}.project-explorer .filters header button{margin:0 0 0 auto}</style><meta name="generator" content="Gatsby 2.30.3"/><title data-react-helmet="true">Graphing depth · rileyjshaw</title><meta data-react-helmet="true" name="description" content="Riley J. Shaw is an artist, engineer, and educator. Focused on accessibility, mentorship, and community, Riley questions who “digital literacy” serves."/><meta data-react-helmet="true" property="og:title" content="Graphing depth · The Digital Landfill of Riley J. Shaw"/><meta data-react-helmet="true" property="og:description" content="Riley J. Shaw is an artist, engineer, and educator. Focused on accessibility, mentorship, and community, Riley questions who “digital literacy” serves."/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="@rileyjshaw"/><meta data-react-helmet="true" name="twitter:title" content="Graphing depth · The Digital Landfill of Riley J. Shaw"/><meta data-react-helmet="true" name="twitter:description" content="Riley J. Shaw is an artist, engineer, and educator. Focused on accessibility, mentorship, and community, Riley questions who “digital literacy” serves."/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#4ccbab"/><link rel="apple-touch-icon" sizes="192x192" href="/android-chrome-192x192.png"/><link rel="apple-touch-icon" sizes="512x512" href="/android-chrome-512x512.png"/><link rel="alternate" type="application/rss+xml" title="Highlights feed" href="/highlights.xml"/><link rel="alternate" type="application/rss+xml" title="Blog feed" href="/blog.xml"/><link rel="alternate" type="application/rss+xml" title="Blog feed: internal posts only" href="/blog-internal.xml"/><link rel="alternate" type="application/rss+xml" title="Lab projects feed" href="/lab.xml"/><link rel="alternate" type="application/rss+xml" title="Firehose feed" href="/index.xml"/><link as="script" rel="preload" href="/webpack-runtime-ef6dec590aa515bc6a85.js"/><link as="script" rel="preload" href="/framework-55f7b2ba736e89fdc740.js"/><link as="script" rel="preload" href="/dc6a8720040df98778fe970bf6c000a41750d3ae-2a04779bb19cded8d476.js"/><link as="script" rel="preload" href="/app-51626a931fa415578909.js"/><link as="script" rel="preload" href="/styles-407fe62976dc5310c43e.js"/><link as="script" rel="preload" href="/701e04dc5ea1100df7553c4391a0d3e232837385-65a58702dae5754e5d48.js"/><link as="script" rel="preload" href="/component---src-templates-post-js-5e4bd44e6fd0fbce9b2b.js"/><link as="fetch" rel="preload" href="/page-data/blog/graphing-depth/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3605882644.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="manifest" href="/site.webmanifest"/><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#4ccbab"/><meta name="msapplication-TileColor" content="#4ccbab"/><meta name="theme-color" content="#4ccbab"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="site-content"><header class="top-nav" role="banner"><nav role="navigation"><h1><a href="/">Riley Shaw</a></h1> <!-- -->/ <a href="/blog">Blog</a> / <!-- -->Graphing depth</nav></header><main><article class="blog-post-content" role="article"><header><h1>Graphing depth</h1><div class="subheading"><time>Posted <!-- -->December 04, 2014</time></div></header><p>There’s something magical about a procedure that just works. Even if you don’t understand <em>why</em> it works, having a set of steps that will always get you to the same destination feels nice. In life there are few patterns that consistently produce the same outcome. But in math? Hoo boy…</p><p>This post takes us through two <em>very</em> simple procedures that converge to a numerical endpoint. We’re going to graph the amount of time it takes to reach this endpoint, which actually ends up being quite pretty.</p><p>Careful; such routines can be somewhat of a rabbit hole. As <a href="http://xkcd.com/710/" target="_blank" rel="noopener noreferrer">xkcd</a>’s Randall Munroe puts it,</p><blockquote><p>The Collatz Conjecture states that if you pick a number, and if it’s even divide it by two and if it’s odd multiply it by three and add one, and if you repeat this procedure long enough, eventually your friends will stop calling to see if you want to hang out.</p></blockquote><h2 id="6174" style="position:relative"><a href="#6174" aria-label="6174 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>6174,</h2><p>or Kaprekar’s Constant, is the endpoint of one such procedure. If we run any<sup id="fnref-1"><a href="#fn-1" class="footnote-ref">1</a></sup> four-digit number through the following steps:</p><ol><li>arrange the digits in descending and then in ascending order to get two four-digit numbers, adding leading zeros if necessary</li><li>subtract the smaller number from the bigger number</li><li>repeat</li></ol><p>We’ll reach 6174 in at most 7 iterations.</p><p>Let’s go through a quick example using 1989<sup id="fnref-2"><a href="#fn-2" class="footnote-ref">2</a></sup>, which breaks into 9981 and 1899:</p><ol><li>9981 - 1899 = 8082</li><li>8820 - 0288 = 8532</li><li>8532 - 2358 = 6174 (yay!)</li></ol><p>Let’s call the number of iterations it takes an input to reach 6174 its <em>depth</em>.<sup id="fnref-3"><a href="#fn-3" class="footnote-ref">3</a></sup> Here’s a quick program to return the Kaprekar depth of a 4-digit number:</p><div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">kaprekar</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">function</span> <span class="token function">step</span><span class="token punctuation">(</span><span class="token parameter">cur<span class="token punctuation">,</span> depth</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// return the depth if our current number is 6174 (or 0 for repdigits)</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>cur <span class="token operator">===</span> <span class="token number">6174</span> <span class="token operator">||</span> <span class="token operator">!</span>cur<span class="token punctuation">)</span> <span class="token keyword">return</span> depth<span class="token punctuation">;</span>

		<span class="token comment">// otherwise, split the current number into an array</span>
		<span class="token comment">// of digits and sort it in ascending order</span>
		<span class="token keyword">var</span> lo <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#x27;&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// make a new array of the numbers in descending order</span>
		<span class="token keyword">var</span> hi <span class="token operator">=</span> lo<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// turn the arrays back into integers</span>
		lo <span class="token operator">=</span> <span class="token operator">+</span>lo<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#x27;&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		hi <span class="token operator">=</span> <span class="token operator">+</span>hi<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#x27;&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// recursively call the function on the difference, adding 1 to depth</span>
		<span class="token keyword">return</span> <span class="token function">step</span><span class="token punctuation">(</span>hi <span class="token operator">-</span> lo<span class="token punctuation">,</span> depth <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// initialize the first step with a depth of 0</span>
	<span class="token keyword">return</span> <span class="token function">step</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div><p>Running <code class="language-javascript">kaprekar(1989)</code> returns <code class="language-javascript">3</code>. Success!</p><h2 id="more-digits" style="position:relative"><a href="#more-digits" aria-label="more digits permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>More digits</h2><p>If we’re dealing with one digit we can set the fixed point at 0. Cool. What about two digits?</p><ul><li>63 - 36 = 27</li><li>72 - 27 = 45</li><li>54 - 45 = 09</li><li>90 - 09 = 81</li><li>81 - 18 = 63</li><li>63 - 36 = uh oh…</li></ul><p>It looks like we’ve found our way into a loop. Going off our original definition, the Kaprekar depth at 63 would be infinity.</p><p>Since Kaprekar’s routine is deterministic, as soon as we run into a number we’ve already seen we’re stuck in the same loop of numbers. We don’t get any new information at this point, so let’s redefine depth to mean <em>the amount of steps it takes until a number we’ve seen before reemerges</em>. This still works for fixed-point convergence, since 6174 “reemerges” on the next step.</p><p>Using this new definition, the depth of 63 is 5. Let’s update our code:</p><div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">kaprekar</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">function</span> <span class="token function">step</span><span class="token punctuation">(</span><span class="token parameter">cur<span class="token punctuation">,</span> prev<span class="token punctuation">,</span> depth</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// return the depth - 1 if we’ve come across this number before</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>prev<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">return</span> depth <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token comment">// otherwise, log that we’ve now seen the current number</span>
		<span class="token keyword">else</span> prev<span class="token punctuation">[</span>cur<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

		<span class="token comment">// find the ascending and descending parts as we did before</span>
		<span class="token comment">// …</span>

		<span class="token comment">// and take it one level deeper</span>
		<span class="token keyword">return</span> <span class="token function">step</span><span class="token punctuation">(</span>hi <span class="token operator">-</span> lo<span class="token punctuation">,</span> prev<span class="token punctuation">,</span> depth <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// initialization for the first step</span>
	<span class="token keyword">return</span> <span class="token function">step</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div><p>Great! This function should work with fixed point and fixed series (loop) stopping conditions. Running <code class="language-javascript">kaprekar(63)</code> now returns <code class="language-javascript">5</code>; before, it would’ve tried to crash your browser.</p><h2 id="the-fun-part" style="position:relative"><a href="#the-fun-part" aria-label="the fun part permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The fun part</h2><p>Now that we have a function to determine the Kaprekar depth<sup id="fnref-4"><a href="#fn-4" class="footnote-ref">4</a></sup> of an arbitrary number; let’s visualize it! We’ll first need to write a drawing function that starts at 0 and moves left-to-right, top-to-bottom until it reaches the bottom-right corner. The code looks like this:</p><div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token parameter">rows<span class="token punctuation">,</span> cols<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> y <span class="token operator">&lt;</span> rows<span class="token punctuation">;</span> y<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> x <span class="token operator">&lt;</span> cols<span class="token punctuation">;</span> x<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function">drawPixel</span><span class="token punctuation">(</span><span class="token function">fn</span><span class="token punctuation">(</span>x <span class="token operator">+</span> y <span class="token operator">*</span> cols<span class="token punctuation">)</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div><p>Calling this function with the arguments,</p><div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token function">draw</span><span class="token punctuation">(</span>kaprekar<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div><p>results in a plot of total cycle depth for the Kaprekar Routine for the range [0, 1M). Each pixel represents an integer, with 0 in the top left corner and 999999 in the bottom right. Dark pixels represent a high depth at that number; the max depth for this range is shockingly low at 19.</p><figure class="blog-figure"><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:675px">
      <a class="gatsby-resp-image-link" href="/static/04fd888649cc5bd023243415c089ba23/00d43/kaprekar.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:100%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAABr0lEQVQ4y21UWXbDIAzkQnHuFzcGb+012mZxmqZnpAgtDCQfPIEQo2EkcN39GvP4ucTucWP7u8Xudk5W/HewtEd+ik3z/V+yjy3v7ZN13eU7dqfP2F1PDEJ2I5v8W5rT/vmLLQ3a13jyb2Ilxu2GOe7CGrMdkz1ObL2s/ZL2F46Z3tlHY07z+YPn6k9rBqTDw8SHCVATZCt+i5l5j0A0WcZY8nAZgBx9YKvrQyhzAnkbGVDZegGi9bgaqLOrolVgPURAR2EXhK0XVsSUEojfcWZlQMw8H7Z14LmyHeDqCC5sXxfFmEkiBUd/EP1EOy2Wq65oDF4wI437sYB6OKNFMw1RYK0mMqODlAALp7Lg2eTjKmPplRUyw4pbItARSDmkW6o7lyC6JjIjsEOo5QG5nHW+ihugWVEOlED9+qqgsK5QnutWGKaaATJTWajFsOWSdQaib9Uvz+D5SlPNTJM1j8LZlca1FlivbtUEti2zPgBDZYegmSnoh59A+0xD3XKuchjoWgDxdWDrNMwKQwrqx6pSFbhpucSnZ4qxGXySz0Gb294mfEttERpG1deW4v4BLEty3x5rxSEAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="Total cycle depth for the Kaprekar Routine in the range [0, 1M)" title="Total cycle depth for the Kaprekar Routine in the range [0, 1M)" src="/static/04fd888649cc5bd023243415c089ba23/23296/kaprekar.png" srcSet="/static/04fd888649cc5bd023243415c089ba23/d23e3/kaprekar.png 169w,/static/04fd888649cc5bd023243415c089ba23/2b41d/kaprekar.png 338w,/static/04fd888649cc5bd023243415c089ba23/23296/kaprekar.png 675w,/static/04fd888649cc5bd023243415c089ba23/00d43/kaprekar.png 1000w" sizes="(max-width: 675px) 100vw, 675px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/>
  </a>
    </span></p><figcaption>Kaprekar Routine Depths: [0, 1M). <a href="http://codepen.io/rileyjshaw/pen/hipBu" rel="noopener noreferrer" target="_blank">View code</a></figcaption></figure><p>The <a href="http://codepen.io/rileyjshaw/pen/hipBu" target="_blank" rel="noopener noreferrer"><em>View code</em> link</a> above uses the same code as our example with a bit of color logic tacked on, and a drawing loop that only computes 1% at a time to make sure your browser doesn’t freeze.</p><p>Since numbers with fewer digits reach their stopping condition sooner, a light band is observable at the top of the image. Since any two numbers composed of the same digits run through the same steps, a few axes of symmetry can be observed.</p><h2 id="enter-ulam" style="position:relative"><a href="#enter-ulam" aria-label="enter ulam permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Enter Ulam</h2><p>Mathmetician Stanislaw Ulam made an interesting discovery while doodling during the presentation of a <!-- -->“<!-- -->long and very boring paper<!-- -->”<!-- -->. He started by writing the natural numbers in a rectangular spiral with 1 in the center:</p><figure class="blog-figure"><p><img src="/816d22eb35a3e8759b49cf4fa3c637ad/ulam-howto-1.svg" alt="Ulam Spiral"/></p><figcaption>Ulam Spiral: [1, 50)</figcaption></figure><p>In our Kaprekar graph we decided that the drawing function should move from top-left to bottom-right. Let’s see if we can make a drawing function that starts in the center and moves outwards in an Ulam spiral<sup id="fnref-5"><a href="#fn-5" class="footnote-ref">5</a></sup>:</p><div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">drawUlam</span><span class="token punctuation">(</span><span class="token parameter">maxVal<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> directions <span class="token operator">=</span> <span class="token punctuation">[</span>
		<span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 0: right</span>
		<span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 1: up</span>
		<span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 2: left</span>
		<span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 3: down</span>
	<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">var</span> center <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span>maxVal<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// center point of the grid</span>
	<span class="token keyword">var</span> run <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// current spiral arm length</span>
	<span class="token keyword">var</span> redirect <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">// next number that the spiral changes direction at</span>
	<span class="token keyword">var</span> direction <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// current direction</span>
	<span class="token keyword">var</span> position <span class="token operator">=</span> <span class="token punctuation">{</span>
		x<span class="token operator">:</span> center <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// offset x by -1; we move right before drawing</span>
		y<span class="token operator">:</span> center<span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> maxVal<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">===</span> redirect<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			direction <span class="token operator">=</span> <span class="token punctuation">(</span>direction <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">4</span><span class="token punctuation">;</span>
			<span class="token comment">// run increases when switching left or right</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>direction <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> run<span class="token operator">++</span><span class="token punctuation">;</span>
			redirect <span class="token operator">+=</span> run<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		position<span class="token punctuation">.</span>x <span class="token operator">+=</span> directions<span class="token punctuation">[</span>direction<span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">;</span>
		position<span class="token punctuation">.</span>y <span class="token operator">+=</span> directions<span class="token punctuation">[</span>direction<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">;</span>
		<span class="token function">drawPixel</span><span class="token punctuation">(</span><span class="token function">fn</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> position<span class="token punctuation">.</span>x<span class="token punctuation">,</span> position<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div><p>By replacing the drawing function in our Kaprekar depth example with <code class="language-javascript">drawUlam()</code> we get the following graph for the range [0, 998k):</p><figure class="blog-figure"><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:675px">
      <a class="gatsby-resp-image-link" href="/static/8ec66740ba96fa736339a1fd1b24b9c2/20c85/kaprekar-ulam.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:100%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAABqUlEQVQ4y32UTU7DMBCFe6OQXikOFMINCF10V9tFUJRyjFLYAMdiUaQKxYzHY2f8UxZPcWzny5uXcWaVUN+gX9CpEvrkrlyluYJa2NfI0wwGP5WQBiZB2sA9jaVTy+fUtM9e/ZpXI40FHnGxkWOQsFKJ/JwuzIFaNz8BBcLKTtwLTbwuJzV+rMghloTO4vJ4ObzMCMzmESjUkTaNZ12h1syZioUvQFMEdAtjtOnywVTdYC66HQiuty84tnO45uFJFDGwkaEkC6mX76a+f3NakmBcXT8X8lRJyT5D4YE7ePjghDCC9wcG1KxkFxc51FSy7yfI62YIzuarLxRC+1cAbhmE9WvskGVoN1sgPGyh89WnqVcfBYelDEMfqqkPrcNuiLMLGQJw8cS+uorKTr7ylKF1Uff7ROD4bg/ALQE1a3DXiwzoPwpr6sWjc+N1RfftJu9XyhGA8khZjPkPonDMMpCOWoeA7CyfO894BLkznZ+YvLHXrEn5wU/cNrIIY0Bp6BfE/hwy/8sUQfIfh9mmBJBmayNIopjBW53DdjOGDUKfyYh9MITkWf8BHu9W7id/NS8AAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="Total cycle depth for the Kaprekar Routine in the range [0, 998k) drawn in an Ulam Spiral" title="Total cycle depth for the Kaprekar Routine in the range [0, 998k) drawn in an Ulam Spiral" src="/static/8ec66740ba96fa736339a1fd1b24b9c2/23296/kaprekar-ulam.png" srcSet="/static/8ec66740ba96fa736339a1fd1b24b9c2/d23e3/kaprekar-ulam.png 169w,/static/8ec66740ba96fa736339a1fd1b24b9c2/2b41d/kaprekar-ulam.png 338w,/static/8ec66740ba96fa736339a1fd1b24b9c2/23296/kaprekar-ulam.png 675w,/static/8ec66740ba96fa736339a1fd1b24b9c2/20c85/kaprekar-ulam.png 999w" sizes="(max-width: 675px) 100vw, 675px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/>
  </a>
    </span></p><figcaption>Ulam Spiral of Kaprekar Routine depths: [0, 998k). <a href="http://codepen.io/rileyjshaw/pen/gixuE" rel="noopener noreferrer" target="_blank">View code</a></figcaption></figure><p>The light band has been transformed into a series of darkening squares, with clear distinctions at each digit boundary.</p><h2 id="the-collatz-conjecture" style="position:relative"><a href="#the-collatz-conjecture" aria-label="the collatz conjecture permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The Collatz Conjecture</h2><h3 id="let-it-hail" style="position:relative"><a href="#let-it-hail" aria-label="let it hail permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Let it hail</h3><p>The second procedure that we’re looking at is called the Collatz Conjecture<sup id="fnref-6"><a href="#fn-6" class="footnote-ref">6</a></sup>. It’s widely recognized and as-yet unproven, which is also true of Kaprekar’s Routine. We start with any integer, then:</p><ol><li>if the number is odd, divide it by two</li><li>if the number is even, multiply it by three and add one</li><li>repeat</li></ol><p>The Collatz Conjecture states that no matter what number we start with, it will always eventually reach 1. This has been verified for numbers up to at least 5.764×10<sup>18</sup> at the time of writing.</p><p>To graph this, we can define depth to mean the number of iterations until 1 is reached. Here’s a quick first pass at a <code class="language-javascript">collatz()</code> function:</p><div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// naive implementation</span>
<span class="token keyword">function</span> <span class="token function">collatz</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> depth <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

	<span class="token keyword">while</span> <span class="token punctuation">(</span>num <span class="token operator">!==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		num <span class="token operator">=</span>
			num <span class="token operator">%</span> <span class="token number">2</span>
				<span class="token operator">?</span> num <span class="token operator">*</span> <span class="token number">3</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token comment">// num is odd</span>
				<span class="token operator">:</span> num <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// num is even</span>

		depth<span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> depth<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div><p>The above function <em>works</em>, but it’s not very efficient; running the numbers from 1 to 1M using this function would waste a <em>lot</em> of time on repeated cycles. Let’s imagine running the number 5 through our procedure:</p><ol><li> <!-- --> <code>5<!-- --> <!-- --> <!-- -->↦ ×3+1</code></li><li> <!-- --> <code>16 ↦ ÷2</code></li><li> <!-- --> <code>8<!-- --> <!-- --> <!-- -->↦ ÷2</code></li><li> <!-- --> <code>4<!-- --> <!-- --> <!-- -->↦ ÷2</code></li><li> <!-- --> <code>2<!-- --> <!-- --> <!-- -->↦ ÷2</code></li><li> <!-- --> <code>1</code></li></ol><p>Soon after, we would have to calculate the depth of 10:</p><ol><li> <!-- --> <code>10 ↦ ÷2</code></li><li> <!-- --> <code>5<!-- --> <!-- --> <!-- -->↦ ×3+1 // repeated</code></li><li> <!-- --> <code>16 ↦ ÷2 <!-- --> <!-- --> // repeated</code></li><li> <!-- --> <code>8<!-- --> <!-- --> <!-- -->↦ ÷2 <!-- --> <!-- --> // repeated</code></li><li> <!-- --> <!-- -->…</li></ol><p>Like Kaprekar’s Routine, this procedure is deterministic. That means that <em>whenever</em> we see the number 5, we’ve got 5 more steps until we see the number 1. By <a href="http://en.wikipedia.org/wiki/Memoization" target="_blank" rel="noopener noreferrer">memoizing</a> the <code class="language-javascript">collatz()</code> function, we avoid running these repetitive cycles.</p><div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// slightly better memoized implementation</span>
<span class="token keyword">var</span> collatz <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> memo <span class="token operator">=</span> <span class="token punctuation">{</span>
		<span class="token number">1</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">cur</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> l<span class="token punctuation">,</span>
			_len<span class="token punctuation">,</span>
			memoized<span class="token punctuation">,</span>
			past <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

		<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> memo<span class="token punctuation">[</span>cur<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&#x27;undefined&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			past<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">;</span>
			cur <span class="token operator">=</span> cur <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">?</span> cur <span class="token operator">*</span> <span class="token number">3</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">:</span> cur <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		memoized <span class="token operator">=</span> memo<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">;</span>

		<span class="token comment">// throw past values into memo</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span>l <span class="token operator">=</span> _len <span class="token operator">=</span> past<span class="token punctuation">.</span>length<span class="token punctuation">;</span> l<span class="token operator">--</span><span class="token punctuation">;</span> <span class="token punctuation">)</span>
			memo<span class="token punctuation">[</span>past<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> _len <span class="token operator">-</span> l <span class="token operator">+</span> memoized<span class="token punctuation">;</span>

		<span class="token keyword">return</span> past<span class="token punctuation">.</span>length <span class="token operator">+</span> memoized<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div><p>Replacing the <code class="language-javascript">kaprekar()</code> function in our first example with <code class="language-javascript">collatz()</code> yields the following graph:</p><figure class="blog-figure"><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:675px">
      <a class="gatsby-resp-image-link" href="/static/b7a919b9a958d5444cdd408262b6b61b/00d43/collatz.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:100%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAABLElEQVQ4y4WRSZKDMAxFdbMku851MR4YOouQc0FDsMiLSlQvfmn+X7Lldb/M0/2yTNU+d/9trf908pOB/P5clxXzY7cL7X8+MVbIsJINezBrYUBTX+MRdjQkrG+Ei4LDm98hx57exOwTTZQ3bsdAbwYUJOVcqTkpUNChvDZoc+cMKmmB1R7JSGxEG1K1JORW7FFoj3zUv5VSJcwgVz8awlIJu/3km6toNyWURGupimyxqFpCkcgngqyzJpbg+5TrsUl0BDwIVVozmOppEbVs6vQjCTMGsiFRqz7jhI8pJCyOWgBBQBwB+5GSnC28XDRbsjfhKjkbCCcimk8mH/mGyXmf1tnIDjeOuLRQtD9N0uBc0GCJgzDgwb1ftE/ggdtLNMUGytG8W3CIgyH+A7x6gvML8PAAAAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="Total cycle depth for the Collatz Conjecture in the range (0, 1M]" title="Total cycle depth for the Collatz Conjecture in the range (0, 1M]" src="/static/b7a919b9a958d5444cdd408262b6b61b/23296/collatz.png" srcSet="/static/b7a919b9a958d5444cdd408262b6b61b/d23e3/collatz.png 169w,/static/b7a919b9a958d5444cdd408262b6b61b/2b41d/collatz.png 338w,/static/b7a919b9a958d5444cdd408262b6b61b/23296/collatz.png 675w,/static/b7a919b9a958d5444cdd408262b6b61b/00d43/collatz.png 1000w" sizes="(max-width: 675px) 100vw, 675px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/>
  </a>
    </span></p><figcaption>Collatz Conjecture depths: (0, 1M]. <a href="http://codepen.io/rileyjshaw/pen/hayod" rel="noopener noreferrer" target="_blank">View code</a></figcaption></figure><p>The banding that’s observed is interesting; it looks almost like cloth grain. This tells us that sequential numbers are more likely to have similar depths.</p><p>Using the <code class="language-javascript">ulam()</code> drawing function, we get:</p><figure class="blog-figure"><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:675px">
      <a class="gatsby-resp-image-link" href="/static/c0c13c2d79ee3c05b99e2ed56cf06514/20c85/collatz-ulam.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:100%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/UlEQVQ4y31Uy1LDMAzMbzD0+eE0gQIFDnCEtrgEUt4n+BgOMFOjlbWO0jIcdiTL9notyS5uq9GX4GdZjr7FKuADoforNuzEOYfYfDL+LsT5EUQJRlhZEBeTsVqOV4dDtfSFNI+DjBdl2o99hZ0Q746Gm1oAK5t2ELxfjTJkv8Zgbw7Gm0yIDUKWFAjg1zZWfzqInCcwDuZDrRBGXDkTYgIk/xFw3oMpuyZhSLlRhfdC9HA8yJaop8OdGMY+p3Pk0KqXFXLT+qQfH0/7sRHbyBg+Yo0hHdKS7hKm5OqVsLAxQpA8zfrxedbLQOzeUtKqtByiKCi7VTBSJVQ9CeHreU+wH98v9uObWMTWp4mwdjnuEC7LNod3MgmyRpX1lOjzai9+XO5lQly3sTyyMCDVPpTcqULrJ53AlaHi5aynJCDLhHJILtRWm+UcWscrIRQ+mELki1d+M3QIp932mfOl2DPasNdYZRQDV8yYJTTWMrUVhMg5JGGwKkPd2qFxttubg/xSsA+pK27TT5Gfnm9eKvHNTrAH0dTYz2eoCuFILvHYbXH7/ODXruf8AVRogrS5E2GVCPkd+URTDQ9gI2+/9WDQKpvcDYP5ryO4oWo/CX4Kq22FizJdOaQ/LXrYG985xPeerzLWF8FVeVk6ZbZgMUk/MX9xT8z16S9ISn8B2dTlWSiLfhEAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="Total cycle depth for the Collatz Conjecture in the range (0, 998k] drawn in an Ulam Spiral" title="Total cycle depth for the Collatz Conjecture in the range (0, 998k] drawn in an Ulam Spiral" src="/static/c0c13c2d79ee3c05b99e2ed56cf06514/23296/collatz-ulam.png" srcSet="/static/c0c13c2d79ee3c05b99e2ed56cf06514/d23e3/collatz-ulam.png 169w,/static/c0c13c2d79ee3c05b99e2ed56cf06514/2b41d/collatz-ulam.png 338w,/static/c0c13c2d79ee3c05b99e2ed56cf06514/23296/collatz-ulam.png 675w,/static/c0c13c2d79ee3c05b99e2ed56cf06514/20c85/collatz-ulam.png 999w" sizes="(max-width: 675px) 100vw, 675px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/>
  </a>
    </span></p><figcaption>Ulam Spiral of Collatz Conjecture depths: (0, 998k]. <a href="http://codepen.io/rileyjshaw/pen/fihEm" rel="noopener noreferrer" target="_blank">View code</a></figcaption></figure><p>Pretty.</p><h2 id="conclusion" style="position:relative"><a href="#conclusion" aria-label="conclusion permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Conclusion</h2><p>We set out to make some nice looking graphs; we now have four of them<sup id="fnref-7"><a href="#fn-7" class="footnote-ref">7</a></sup>. But why stop there? As we’ve seen, a great advantage to keeping the depth function separate from the drawing function is that we can easily swap in new functions<sup id="fnref-8"><a href="#fn-8" class="footnote-ref">8</a></sup>. A great place to find inspiration for new functions is <a href="https://oeis.org/https://oeis.org/" target="_blank" rel="noopener noreferrer">The On-Line Encyclopedia of Integer Sequences</a>.</p><p>Have fun!</p><h2 id="footnotes" style="position:relative"><a href="#footnotes" aria-label="footnotes permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Footnotes</h2><div class="footnotes"><hr/><ol><li id="fn-1"><p>Except for repdigits like 3333, which reach their fixed point of 0 after one step.<a href="#fnref-1" class="footnote-backref">↩</a></p></li><li id="fn-2"><p><a href="http://youtu.be/M8G8aqlegYI" target="_blank" rel="noopener noreferrer">The number. Another summer.</a><a href="#fnref-2" class="footnote-backref">↩</a></p></li><li id="fn-3"><p>i.e. with input <em>n</em> and depth <em>t</em> we’re looking for <em>t</em> where <!-- -->ƒ<sub><em>n</em></sub>(<em>t</em>) = <!-- -->ƒ<sub><em>n</em></sub>(<em>t</em> - 1). More generally, <!-- -->ƒ<sub><em>n</em></sub>(<em>t</em>) = <!-- -->ƒ<sub><em>n</em></sub>(<em>t</em> - <em>L</em>), where <em>L</em> = fixed-loop size. But we’ll get to that part soon.<a href="#fnref-3" class="footnote-backref">↩</a></p></li><li id="fn-4"><p>A neologism, as far as I can tell. “Stopping time” is likely more appropriate.<a href="#fnref-4" class="footnote-backref">↩</a></p></li><li id="fn-5"><p>The Ulam Spiral story doesn’t end with a different drawing function. The presentation that he was sitting in on must have been really boring, because Ulam started circling prime numbers on his spiral:</p><figure class="blog-figure"><p><img src="/fd714e7880c2c3298614cd6e39e8d168/ulam-howto-2.svg" alt="Ulam Spiral with prime numbers shown"/></p><figcaption>Ulam Spiral with prime numbers shown: [1, 50)</figcaption></figure><p>He noticed that the primes tended to line up along certain diagonal lines more than others. This isn’t evident in the small grid above, but we can repurpose our old code to generate a larger grid. If we replace the <code class="language-javascript">kaprekar()</code> function with a function that only returns a color if the number is prime, we can visualize Ulam’s diagonal primes:</p><figure class="blog-figure"><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:675px">
      <a class="gatsby-resp-image-link" href="/static/5f2f0eb6cdda884eb7971c6f14171d13/20c85/ulam.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:100%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA/klEQVQ4y5VUQRLCIAzkP37DEDp6UP//Dg92xgot2HSbpXrYpmHIsiyBcIr3Z8aY8aIQiGw8x5A/Y8aUB1YI+VcYd+aFylyS9wytESHwT/JQ5U4zkYIqJdGqUqNWisJGuKy2FlpEB+rbFKrBU5W+J8Tig8W2hOoUKCFR55Bi27LAlltBMjGZnFlBPbREA6Bnh3hbtttpqq6PBYmok/XEtwpx5UZQyC5VYeL+LYRMofVtcHy0XjfC8w0IrSd4COxAtNc24nionf5z+nOvMHbI4vHt4YTeNWNEh23jPRC/PG/SUyh/qBT2OHQmuuSodG6b1tgCbYNkefI3F8jNm/gBllC9NkQHsm4AAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="Prime numbers in the range [0, 1M) drawn in an Ulam Spiral" title="Prime numbers in the range [0, 1M) drawn in an Ulam Spiral" src="/static/5f2f0eb6cdda884eb7971c6f14171d13/23296/ulam.png" srcSet="/static/5f2f0eb6cdda884eb7971c6f14171d13/d23e3/ulam.png 169w,/static/5f2f0eb6cdda884eb7971c6f14171d13/2b41d/ulam.png 338w,/static/5f2f0eb6cdda884eb7971c6f14171d13/23296/ulam.png 675w,/static/5f2f0eb6cdda884eb7971c6f14171d13/20c85/ulam.png 999w" sizes="(max-width: 675px) 100vw, 675px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/>
  </a>
    </span></p><figcaption>Ulam Spiral with prime numbers shown: [0, 988k). <a href="http://codepen.io/rileyjshaw/pen/gaHhn" rel="noopener noreferrer" target="_blank">View code</a></figcaption></figure><p><a href="#fnref-5" class="footnote-backref">↩</a></p></li><li id="fn-6"><p>The Collatz Conjecture has many names. You might know it as: the 3n + 1 conjecture, the Ulam conjecture, Kakutani’s problem, the Thwaites conjecture, Hasse’s algorithm, the Syracuse problem, the hailstone sequence, hailstone numbers, or wondrous numbers.<a href="#fnref-6" class="footnote-backref">↩</a></p></li><li id="fn-7"><p>Five if you count the footnotes!<a href="#fnref-7" class="footnote-backref">↩</a></p></li><li id="fn-8"><p>This is known as <a href="http://en.wikipedia.org/wiki/Function_composition_(computer_science)" target="_blank" rel="noopener noreferrer">function composition</a>.<a href="#fnref-8" class="footnote-backref">↩</a></p></li></ol></div></article></main></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/graphing-depth";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-489f03541d98044150c6.js"],"app":["/app-51626a931fa415578909.js"],"component---src-pages-404-js":["/component---src-pages-404-js-76f5d803c091f66cc479.js"],"component---src-pages-about-js":["/component---src-pages-about-js-d6e9f5505490bbacc3b0.js"],"component---src-pages-index-js":["/component---src-pages-index-js-b604d6103a7a7df58853.js"],"component---src-pages-lab-js":["/component---src-pages-lab-js-2e9b32f0d35a4de40949.js"],"component---src-pages-palette-test-tool-js":["/component---src-pages-palette-test-tool-js-cc25a254216b3f7624da.js"],"component---src-pages-scroll-loop-js":["/component---src-pages-scroll-loop-js-67f87f2d08d60d0a6962.js"],"component---src-pages-subscribe-js":["/component---src-pages-subscribe-js-e56e4270f3ffc81e6e91.js"],"component---src-pages-todo-js":["/component---src-pages-todo-js-a1b4ec439072f62eed16.js"],"component---src-templates-blog-list-js":["/component---src-templates-blog-list-js-a1786ead1287bebd8cff.js"],"component---src-templates-post-js":["/component---src-templates-post-js-5e4bd44e6fd0fbce9b2b.js"]};/*]]>*/</script><script src="/polyfill-489f03541d98044150c6.js" nomodule=""></script><script src="/component---src-templates-post-js-5e4bd44e6fd0fbce9b2b.js" async=""></script><script src="/701e04dc5ea1100df7553c4391a0d3e232837385-65a58702dae5754e5d48.js" async=""></script><script src="/styles-407fe62976dc5310c43e.js" async=""></script><script src="/app-51626a931fa415578909.js" async=""></script><script src="/dc6a8720040df98778fe970bf6c000a41750d3ae-2a04779bb19cded8d476.js" async=""></script><script src="/framework-55f7b2ba736e89fdc740.js" async=""></script><script src="/webpack-runtime-ef6dec590aa515bc6a85.js" async=""></script></body></html>