{"version":3,"sources":["webpack:///./src/pages/scroll-loop.js"],"names":["Page","page","className","Quote","children","onChange","useViewport","ref","inView","boundingClientRect","useEffect","y","FullPage","useState","height","setHeight","useRef","useLayoutEffect","current","clientHeight","args","ScrollLoop","setPage","handlePageChange","p","Array","from","length","_","i","key"],"mappings":"qHAAA,sDAKMA,EAAO,SAAC,GAAD,IAAEC,EAAF,EAAEA,KAAF,OACZ,yBAAKC,UAAU,mBACd,mCAASD,KAILE,EAAQ,SAAC,GAA0B,IAAzBC,EAAwB,EAAxBA,SAAUC,EAAc,EAAdA,SAAc,EACGC,cAAnCC,EADgC,KAC3BC,EAD2B,KACnBC,EADmB,KAKvC,OAHAC,qBAAU,WACLF,IAAUC,aAAA,EAAAA,EAAoBE,GAAI,GAAGN,GAAS,KAChD,CAACG,IAEH,yBAAKD,IAAKA,EAAKL,UAAU,cACvBE,IAKEQ,EAAW,SAAC,GAAsB,IAArBX,EAAoB,EAApBA,KAAMI,EAAc,EAAdA,SAAc,EACVQ,mBAAS,GAA9BC,EAD+B,KACvBC,EADuB,KAEhCR,EAAMS,iBAAO,MAMnB,OAJAC,2BAAgB,WACfF,EAAUR,EAAIW,QAAQC,iBAItB,yBAAKZ,IAAKA,GACT,kBAACP,EAAD,CAAMC,KAAMA,IACZ,kBAACE,EAAD,CAAOE,SAAU,sCAAIe,EAAJ,yBAAIA,EAAJ,uBAAaf,EAASS,KAAWM,KACjD,qCAAWnB,EAAX,QAmDWoB,UA7CI,WAAO,IAAD,EACAR,mBAAS,GAA1BZ,EADiB,KACXqB,EADW,OAEkBT,mBAAS,IAF3B,sBAmBxB,SAASU,EAAiBT,EAAQN,GAEhCc,EADGd,EACK,SAAAgB,GAAC,OAAIA,EAAI,GAGT,SAAAA,GAAC,OAAIA,EAAI,IAInB,OACC,yBAAKtB,UAAU,oBACbuB,MAAMC,KACN,CAACC,OAAQ,MACT,SAACC,EAAGC,GAAJ,OACC5B,EAAO,EAAI4B,GACV,kBAACjB,EAAD,CACCX,KAAS4B,EAAI,EAAT,MAAgB5B,EACpBI,SAAUkB,EACVO,IAAKD","file":"component---src-pages-scroll-loop-js-6e30cbd40e24b9e437f0.js","sourcesContent":["// Some initial work at trying to get an infinite scroll page going.\nimport './scroll-loop.css';\nimport React, {useState, useLayoutEffect, useRef, useEffect} from 'react';\nimport {useViewport} from '../util/hooks';\n\nconst Page = ({page}) => (\n\t<div className=\"fullscreen plus\">\n\t\t<p>Page {page}</p>\n\t</div>\n);\n\nconst Quote = ({children, onChange}) => {\n\tconst [ref, inView, boundingClientRect] = useViewport();\n\tuseEffect(() => {\n\t\tif (inView && boundingClientRect?.y > 0) onChange(true); // Hmmâ€¦?\n\t}, [inView])\n\treturn (\n\t\t<div ref={ref} className=\"fullscreen\">\n\t\t\t{children}\n\t\t</div>\n\t);\n};\n\nconst FullPage = ({page, onChange}) => {\n\tconst [height, setHeight] = useState(0);\n\tconst ref = useRef(null);\n\n\tuseLayoutEffect(() => {\n\t\tsetHeight(ref.current.clientHeight);\n\t});\n\n\treturn (\n\t\t<div ref={ref}>\n\t\t\t<Page page={page} />\n\t\t\t<Quote onChange={(...args) => onChange(height, ...args)}>\n\t\t\t\t<p>\"Quote {page}\"</p>\n\t\t\t</Quote>\n\t\t</div>\n\t);\n};\n\nconst ScrollLoop = () => {\n\tconst [page, setPage] = useState(1);\n\tconst [[topPage, bottomPage], setPages] = useState([]);\n\t/*\n\n\tPage content\n\tFullscreen quote\n\tPage content\n\tFullscreen quote\n\tEtc.\n\n\tWhen you scroll into the quote with +ve Y, bottomPage becomes topPage,\n\tdestroy old topPage, create new bottomPage.\n\n\tIf you scroll out of the quote with +ve Y, topPage becomes bottomPage,\n\tdestroy old bottomPage, create new topPage.\n\n\t*/\n\n\tfunction handlePageChange(height, inView) {\n\t\tif (inView) {\n\t\t\tsetPage(p => p + 1);\n\t\t\t// window.scrollBy(0, -height);\n\t\t} else {\n\t\t\tsetPage(p => p - 1);\n\t\t\t// window.scrollBy(0, height);\n\t\t}\n\t}\n\treturn (\n\t\t<div className=\"scroll-container\">\n\t\t\t{Array.from(\n\t\t\t\t{length: 1000},\n\t\t\t\t(_, i) =>\n\t\t\t\t\tpage + 1 > i && (\n\t\t\t\t\t\t<FullPage\n\t\t\t\t\t\t\tpage={`${i + 1} / ${page}`}\n\t\t\t\t\t\t\tonChange={handlePageChange}\n\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default ScrollLoop;\n"],"sourceRoot":""}